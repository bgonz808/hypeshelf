echo "üîç Pre-commit checks..."

# Secret scanning (warn only, don't block on pre-commit)
if command -v gitleaks &> /dev/null; then
  echo "  Scanning for secrets..."
  gitleaks protect --staged --verbose || echo "‚ö†Ô∏è  Gitleaks warnings - review before push"
else
  echo "  ‚ö†Ô∏è  Gitleaks not installed - skipping secret scan"
fi

# Security pattern check
echo "  Running security check..."
npx tsx scripts/security-check.ts || exit 1

# Lint and format staged files
echo "  Running lint-staged..."
npx lint-staged
